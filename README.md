# Smart Home Library üè†‚ö°

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

Rust –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º –¥–æ–º–æ–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.  
–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üì¶ –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã**: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∫–æ–º–Ω–∞—Ç—ã, —É–º–Ω—ã–π –¥–æ–º —Å HashMap storage
- **üåê –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã**: Async TCP/UDP –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏  
- **üéÆ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ —Å–µ—Ç—å
- **üß™ –≠–º—É–ª—è—Ç–æ—Ä—ã**: TCP/UDP —ç–º—É–ª—è—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∂–µ–ª–µ–∑–∞
- **üîë HashMap –¥–æ—Å—Ç—É–ø**: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –∫–æ–º–Ω–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–º –∫–ª—é—á–∞–º
- **üß© –ú–∞–∫—Ä–æ—Å—ã**: `room![]` –∏ `house![]` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä
- **üéØ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Newtype –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
- **üß™ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
smart-home/
‚îú‚îÄ‚îÄ Cargo.toml              # Workspace configuration  
‚îú‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ smart-home-lib/         # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
    ‚îú‚îÄ‚îÄ src/
    ‚îÇ   ‚îú‚îÄ‚îÄ devices/        # –£–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ protocol/       # TCP/UDP –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ controllers/    # –°–µ—Ç–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ emulators/      # –≠–º—É–ª—è—Ç–æ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    ‚îÇ   ‚îî‚îÄ‚îÄ units/          # –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã
    ‚îî‚îÄ‚îÄ examples/           # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Rust 1.70+
- Cargo

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/DyakonovAlex/smart-home.git
cd smart-home
```

### –°–±–æ—Ä–∫–∞

```bash
cargo build
```

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```bash
cargo run --example basic_usage
```

### –°–µ—Ç–µ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ TCP (—Ä–æ–∑–µ—Ç–∫–∏) –∏ UDP (—Ç–µ—Ä–º–æ–º–µ—Ç—Ä—ã):

**1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä—ã —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–≤ (UDP):**

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1
cargo run --example therm_emulator kitchen_therm_001 127.0.0.1:4001 22.5 normal

# –¢–µ—Ä–º–∏–Ω–∞–ª 2  
cargo run --example therm_emulator ac_therm_001 127.0.0.1:4002 24.0 normal
```

**2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä—ã —Ä–æ–∑–µ—Ç–æ–∫ (TCP):**

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 3
cargo run --example socket_emulator kettle_001 127.0.0.1:3001 2000.0

# –¢–µ—Ä–º–∏–Ω–∞–ª 4
cargo run --example socket_emulator tv_001 127.0.0.1:3002 150.0
```

**3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:**

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 5
cargo run --example controllers_usage
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
cargo test

# –¢–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ unit —Ç–µ—Å—Ç—ã
cargo test --lib

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Å–µ—Ç—å—é
cargo test -- --ignored
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã

- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**: –†–æ–∑–µ—Ç–∫–∏ –∏ —Ç–µ—Ä–º–æ–º–µ—Ç—Ä—ã —Å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –µ–¥–∏–Ω–∏—Ü–∞–º–∏
- **–ö–æ–º–Ω–∞—Ç—ã**: HashMap —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –¥–æ—Å—Ç—É–ø–æ–º –ø–æ –∫–ª—é—á–∞–º  
- **–î–æ–º**: HashMap –∫–æ–º–Ω–∞—Ç —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º

### –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π

- **–ü—Ä–æ—Ç–æ–∫–æ–ª—ã**: Async TCP –¥–ª—è —Ä–æ–∑–µ—Ç–æ–∫, UDP –¥–ª—è —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–≤
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã**: –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–≠–º—É–ª—è—Ç–æ—Ä—ã**: –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `smart-home-lib/examples/`:

| –ü—Ä–∏–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `basic_usage.rs` | –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π |
| `controllers_usage.rs` | –°–µ—Ç–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã |
| `socket_emulator.rs` | TCP —ç–º—É–ª—è—Ç–æ—Ä —Ä–æ–∑–µ—Ç–∫–∏ |
| `therm_emulator.rs` | UDP —ç–º—É–ª—è—Ç–æ—Ä —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–∞ |
| `socket_client.rs` | TCP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–æ–∑–µ—Ç–∫–∏ |
| `therm_client.rs` | UDP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–∞ |
| `udp_listener.rs` | UDP —Å–µ—Ä–≤–µ—Ä |

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Code Style

```bash
cargo fmt --all
cargo clippy --all-targets
```

### CI/CD

- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `cargo fmt --all -- --check`
- –õ–∏–Ω—Ç–∏–Ω–≥: `cargo clippy --all-targets -- -D warnings`  
- –¢–µ—Å—Ç—ã: `cargo test`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ [smart-home-lib/README.md](./smart-home-lib/README.md).

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© [DyakonovAlex](https://github.com/DyakonovAlex).  
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–±–ª—é–¥–∞–π—Ç–µ —É—Å–ª–æ–≤–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞.

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature-–≤–µ—Ç–∫—É  
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ Pull Request —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
