# Smart Home Library üè†‚ö°

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

Rust –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º –¥–æ–º–æ–º. –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üèóÔ∏è –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
- **`devices/`** - –£–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (—Ä–æ–∑–µ—Ç–∫–∏, —Ç–µ—Ä–º–æ–º–µ—Ç—Ä—ã)
- **`room.rs`** - –ö–æ–º–Ω–∞—Ç—ã —Å HashMap —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **`house.rs`** - –£–º–Ω—ã–π –¥–æ–º —Å HashMap –∫–æ–º–Ω–∞—Ç  
- **`units/`** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (Watts, Celsius)
- **`traits.rs`** - –û–±—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Reporter)

### üåê –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π
- **`protocol/`** - Async –ø—Ä–æ—Ç–æ–∫–æ–ª—ã TCP/UDP –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **`controllers/`** - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –ø–æ —Å–µ—Ç–∏
- **`emulators/`** - TCP/UDP —ç–º—É–ª—è—Ç–æ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üì¶ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- üõ† **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤**: —Ä–æ–∑–µ—Ç–∫–∏, —Ç–µ—Ä–º–æ–º–µ—Ç—Ä—ã
- üîë **HashMap-based storage** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ –∫–ª—é—á–∞–º
- üß© **–ú–∞–∫—Ä–æ—Å—ã** `room![]` –∏ `house![]` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
- üìä **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç—á–µ—Ç–æ–≤** —á–µ—Ä–µ–∑ —Ç—Ä–µ–π—Ç `Reporter`
- üåê **Async TCP/UDP –ø—Ä–æ—Ç–æ–∫–æ–ª—ã** –¥–ª—è —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- üß™ **–≠–º—É–ª—è—Ç–æ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∂–µ–ª–µ–∑–∞
- üéØ **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —Å newtype –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ (Watts, Celsius)
- üîç **–ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** (unit + integration)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `Cargo.toml`:

```toml
[dependencies]
smart-home-lib = "0.1"
```

–ò–ª–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```toml
smart-home-lib = { path = "../smart-home-lib" }
```

## –ü—Ä–∏–º–µ—Ä—ã

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `examples/` –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã:

- **`basic_usage.rs`** - –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
- **`controllers_usage.rs`** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- **`socket_emulator.rs`** - –ó–∞–ø—É—Å–∫ TCP —ç–º—É–ª—è—Ç–æ—Ä–∞ —Ä–æ–∑–µ—Ç–∫–∏
- **`therm_emulator.rs`** - –ó–∞–ø—É—Å–∫ UDP —ç–º—É–ª—è—Ç–æ—Ä–∞ —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–∞
- **`socket_client.rs`** - TCP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–∑–µ—Ç–∫–æ–π
- **`therm_client.rs`** - UDP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–∞
- **`udp_listener.rs`** - UDP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤

#### –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```bash
cargo run --example basic_usage
```

#### –°–µ—Ç–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ TCP (—Ä–æ–∑–µ—Ç–∫–∏) –∏ UDP (—Ç–µ—Ä–º–æ–º–µ—Ç—Ä—ã) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç–º—É–ª—è—Ç–æ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö:

**1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä—ã —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–≤ (UDP):**
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1
cargo run --example therm_emulator kitchen_therm_001 127.0.0.1:4001 22.5 normal

# –¢–µ—Ä–º–∏–Ω–∞–ª 2  
cargo run --example therm_emulator ac_therm_001 127.0.0.1:4002 24.0 normal
```

**2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä—ã —Ä–æ–∑–µ—Ç–æ–∫ (TCP):**
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 3
cargo run --example socket_emulator kettle_001 127.0.0.1:3001 2000.0

# –¢–µ—Ä–º–∏–Ω–∞–ª 4
cargo run --example socket_emulator tv_001 127.0.0.1:3002 150.0
```

**3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:**
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 5
cargo run --example controllers_usage
```

#### –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã

```bash
# TCP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–æ–∑–µ—Ç–∫–∏
cargo run --example socket_client

# UDP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–∞
cargo run --example therm_client

# UDP —Å–µ—Ä–≤–µ—Ä
cargo run --example udp_listener
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞

```bash
cargo build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
cargo test

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä–æ)
cargo test --lib

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Å–µ—Ç—å—é
cargo test -- --ignored
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è

```bash
cargo fmt --all -- --check
cargo clippy --all-targets -- -D warnings
```

## –ú–æ–¥—É–ª–∏

| –ú–æ–¥—É–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `devices` | –£–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (—Ä–æ–∑–µ—Ç–∫–∏, —Ç–µ—Ä–º–æ–º–µ—Ç—Ä—ã) |
| `room` | –ö–æ–º–Ω–∞—Ç—ã —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ |
| `house` | –£–º–Ω—ã–π –¥–æ–º —Å –∫–æ–º–Ω–∞—Ç–∞–º–∏ |
| `protocol` | Async –ø—Ä–æ—Ç–æ–∫–æ–ª—ã TCP/UDP |
| `controllers` | –°–µ—Ç–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ |
| `emulators` | –≠–º—É–ª—è—Ç–æ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| `units` | –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è |
| `traits` | –û–±—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã |

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© [DyakonovAlex](https://github.com/DyakonovAlex).  
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–±–ª—é–¥–∞–π—Ç–µ —É—Å–ª–æ–≤–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞.
